<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <title>{{ page.title | default: site.title }}</title>
  <link rel="icon" type="image/x-icon" href="{{ site.favicon | relative_url }}">
  <link rel="stylesheet" href="/styles/main.css">
  {% if page.url contains '/saas/ghost-rizz' %}
  <link rel="stylesheet" href="/styles/ghost-rizz.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  {% endif %}
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  </head>
  <body>
    {% include header.html %}
    <main>
      {{ content }}
    </main>
    {% include footer.html %}
    {% if page.url contains '/saas/ghost-rizz' %}
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Console Management Script -->
    <script src="/js/console-manager.js"></script>

    <!-- ðŸ›¡ï¸ Sistema inteligente de carregamento de JavaScript -->
    <script>
    (function() {
        // Usa a variÃ¡vel jÃ¡ definida acima
        const isDev = window.IS_DEV_MODE;

        function loadScript(src, onSuccess, onError) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    if (onSuccess) onSuccess();
                    resolve();
                };
                script.onerror = () => {
                    if (onError) onError();
                    reject();
                };
                document.head.appendChild(script);
            });
        }

        async function loadMainScript() {
            if (isDev) {
                try {
                    await loadScript('/js/src/main.js');
                } catch {
                    await loadScript('/js/main.js');
                }
            } else {
                await loadScript('/js/main.js');
            }
        }

        // Carrega quando DOM estiver pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadMainScript);
        } else {
            loadMainScript();
        }

        // Debug helper (console)
        window.switchToDevMode = function() {
            localStorage.setItem('thothandson_dev_mode', 'true');
            console.log('âœ… Modo DEV ativado. Recarregue a pÃ¡gina.');
        };

        window.switchToProdMode = function() {
            localStorage.removeItem('thothandson_dev_mode');
            console.log('âœ… Modo PROD ativado. Recarregue a pÃ¡gina.');
        };
    })();
    </script>
    {% endif %}
  </body>
</html>
